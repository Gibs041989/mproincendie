<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Maintenance Extincteurs - Formulaire</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    function addExtincteur() {
      const container = document.getElementById('extincteurs-container');
      const template = document.getElementById('extincteur-template');
      const clone = template.content.cloneNode(true);
      container.appendChild(clone);
      populateMisesEnService(clone.querySelector('.mise-en-service'));
    }

    function populateMisesEnService(selectElement = null) {
      const currentYear = new Date().getFullYear();
      const options = [];
      for (let i = currentYear; i >= 2000; i--) {
        const option = document.createElement('option');
        option.value = i;
        option.textContent = i;
        options.push(option);
      }
      if (selectElement) {
        options.forEach(opt => selectElement.appendChild(opt));
      } else {
        document.querySelectorAll('.mise-en-service').forEach(select => {
          if (select.children.length < 2) {
            options.forEach(opt => select.appendChild(opt.cloneNode(true)));
          }
        });
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      populateMisesEnService();
    });
  </script>
</head>
<body class="bg-gray-100 p-4 text-gray-800">

  <div class="max-w-5xl mx-auto bg-white p-6 rounded-xl shadow-lg space-y-6">
    <div class="flex justify-between items-center">
      <h1 class="text-2xl font-bold text-red-600">Compte Rendu de Maintenance</h1>
      <a href="/" class="text-blue-600 underline hover:text-blue-800">← Retour à l'accueil</a>
    </div>

    <!-- Infos client -->
    <section>
      <h2 class="text-xl font-semibold mb-2">Informations Client</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <input type="text" placeholder="Nom du client" class="border p-2 rounded w-full" />
        <input type="text" placeholder="Adresse" class="border p-2 rounded w-full" />
        <input type="text" placeholder="Téléphone" class="border p-2 rounded w-full" />
        <input type="email" placeholder="Email" class="border p-2 rounded w-full" />
      </div>
    </section>

    <!-- Intervention -->
    <section>
      <h2 class="text-xl font-semibold mb-2">Détails de l'Intervention</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <input type="date" class="border p-2 rounded w-full" />
        <input type="text" placeholder="Nom du technicien" class="border p-2 rounded w-full" />
      </div>
    </section>

    <!-- Extincteurs -->
    <section>
      <h2 class="text-xl font-semibold mb-4">Extincteurs</h2>
      <div id="extincteurs-container" class="space-y-6"></div>
      <button onclick="addExtincteur()" type="button" class="mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
        ➕ Ajouter un extincteur
      </button>
    </section>

    <!-- Observations générales -->
    <section>
      <h2 class="text-xl font-semibold mb-2">Observations Générales</h2>
      <textarea class="border p-2 rounded w-full" rows="4" placeholder="Remarques générales…"></textarea>
    </section>

    <!-- Valider -->
    <div class="text-center">
      <button class="bg-red-600 text-white px-6 py-2 rounded-xl hover:bg-red-700">
        Générer le PDF
      </button>
    </div>
  </div>

  <!-- Template d'un extincteur -->
  <template id="extincteur-template">
    <div class="p-4 border rounded-lg bg-gray-50 space-y-4">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium mb-1">Extincteur N°</label>
          <input type="text" class="border p-2 rounded w-full" />
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Type d'extincteur</label>
          <select class="border p-2 rounded w-full">
            <option selected disabled>Choisir</option>
            <option>Eau pulvérisée</option>
            <option>Poudre ABC</option>
            <option>CO₂</option>
            <option>Autre</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Mise en service</label>
          <select class="border p-2 rounded w-full mise-en-service text-sm">
            <option selected disabled>Choisir</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Fabricant</label>
          <input type="text" class="border p-2 rounded w-full" />
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Emplacement</label>
          <input type="text" class="border p-2 rounded w-full" />
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Opérations effectuées</label>
          <div class="space-y-1">
            <label class="flex items-center"><input type="checkbox" class="mr-2"> Vérification</label>
            <label class="flex items-center"><input type="checkbox" class="mr-2"> Recharge</label>
            <label class="flex items-center"><input type="checkbox" class="mr-2"> Révision quinquennale</label>
            <label class="flex items-center"><input type="checkbox" class="mr-2"> Mise en service ce-jour</label>
            <label class="flex items-center"><input type="checkbox" class="mr-2"> Remplacement standard</label>
            <label class="flex items-center"><input type="checkbox" class="mr-2"> Autre</label>
          </div>
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Observation pour cet extincteur</label>
        <textarea class="border p-2 rounded w-full" rows="2"></textarea>
      </div>
    </div>
  </template>

</body>
</html>
