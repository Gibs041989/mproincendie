
<!DOCTYPE html>

<html lang="fr">
<head>
<meta charset="utf-8"/>
<title>Intervention - Mendes Protection Incendie</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
<style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f5f5f5;
    }
  </style>
</head>
<body class="min-h-screen pb-24 text-gray-800">
<h1 class="text-xl font-bold text-red-700 mb-4">➕ Nouvelle intervention</h1>
<section class="bg-white rounded shadow p-4 mb-6">
<h2 class="text-lg font-semibold mb-2">👤 Client</h2>
<label class="text-sm text-gray-600">Choisir un client existant</label>
<select class="w-full p-2 border rounded mb-2" id="select-client"></select>
<button class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded text-sm" onclick="window.location.href='nouveau_client.html?from=intervention'">➕ Nouveau client</button>
<label class="mt-4 block text-sm text-gray-600">
<input id="check-lieu-diff" onchange="toggleLieu()" type="checkbox"/> Lieu d’intervention différent
    </label>
<div id="lieu-diff" style="display: none;">
<label class="text-sm text-gray-600">Adresse du lieu d’intervention</label>
<input class="w-full p-2 border rounded" placeholder="Saisir adresse ou nom du site" type="text">
</input></div>
<label class="mt-4 block text-sm text-gray-600">Lieu d’intervention associé</label>
<select class="w-full p-2 border rounded mt-1" id="select-lieu" style="display: none;">
<option value="">-- Choisir un lieu --</option>
</select>
</section>
<section class="bg-white rounded shadow p-4 mb-6">
<h2 class="text-lg font-semibold text-gray-800 mb-3">🔧 Type d’intervention</h2>
<div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm">
<a class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-center" href="intervention_extincteurs.html">🧯 Extincteurs</a>
<a class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-center" href="intervention_baes.html">💡 BAES</a>
<a class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-center" href="intervention_ria.html">🚿 RIA</a>
<a class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-center" href="intervention_desenfumage.html">💨 Désenfumage</a>
<a class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-center col-span-full" href="#" id="btn-bon">🧾 Bon d’intervention</a>
</div>
</section>
<section class="bg-white rounded shadow p-4 mb-6">
<h2 class="text-lg font-semibold text-gray-800 mb-2">📄 Brouillons en cours</h2>
<div class="space-y-3 text-sm text-gray-700" id="brouillons-container">
<em>Aucun brouillon en cours.</em>
</div>
</section>
<footer class="fixed bottom-0 left-0 right-0 bg-white border-t shadow flex justify-around p-3 text-xs z-50">
<a class="flex flex-col items-center gap-1" href="index.html">
<span class="text-xl">🏠</span>
<span>Accueil</span>
</a>
<a class="flex flex-col items-center gap-1" href="clients.html">
<span class="text-xl">📁</span>
<span>Clients</span>
</a>
<a class="flex flex-col items-center gap-1" href="intervention.html">
<span class="text-xl">🛠️</span>
<span>Intervention</span>
</a>
</footer>

<script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const selectClient = document.getElementById("select-client");
    const selectLieu = document.getElementById("select-lieu");
    const lieuDiffCheck = document.getElementById("check-lieu-diff");

    function saveClientData() {
      const clientText = selectClient.options[selectClient.selectedIndex]?.text || "";
      const lieuText = (lieuDiffCheck.checked && selectLieu.value) ? selectLieu.options[selectLieu.selectedIndex]?.text : clientText;
      if (clientText) {
        localStorage.setItem("nom_client", clientText);
        localStorage.setItem("lieu_intervention", lieuText || clientText);
      }
    }

    selectClient?.addEventListener("change", saveClientData);
    selectLieu?.addEventListener("change", saveClientData);
    lieuDiffCheck?.addEventListener("change", saveClientData);
  });
</script>
</script></body>
</html>
