<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bon d'Intervention - MPro Incendie</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <img src="assets/logo.png" alt="Logo MPro Incendie" class="logo">
        <h1>ğŸ”¥ Bon d'Intervention</h1>
    </header>
    <main>
        <section class="client-section">
            <h2>ğŸ§¾ Client</h2>
            <p><strong>Client :</strong> <span id="client-name">Non sÃ©lectionnÃ©</span></p>
            <p><strong>Adresse :</strong> <span id="client-address">Non sÃ©lectionnÃ©e</span></p>
            <p><strong>Lieu dâ€™intervention :</strong> <span id="intervention-location">Non sÃ©lectionnÃ©</span></p>
            <p><strong>Email :</strong> <span id="client-email">Non sÃ©lectionnÃ©</span></p>
        </section>

        <section class="crm-summary">
            <h2>ğŸ“‹ RÃ©sumÃ© CRM Extincteurs</h2>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Type</th>
                        <th>Ã‰tat</th>
                        <th>AbrÃ©viation</th>
                    </tr>
                </thead>
                <tbody id="crm-extincteurs"></tbody>
            </table>
        </section>

        <section class="intervention-details">
            <h2>ğŸ“… DÃ©tails de lâ€™intervention</h2>
            <p><strong>Date dâ€™intervention :</strong> <input type="date" id="intervention-date"></p>
            <p><strong>Technicien :</strong> <input type="text" id="technician-name"></p>
            <p><strong>DurÃ©e (heures) :</strong> <input type="number" id="duration" min="0" step="0.5"></p>
        </section>

        <section class="billing-section">
            <h2>ğŸ“‹ Prestations & MatÃ©riel</h2>
            <div class="table-container">
                <table id="billing-table">
                    <thead>
                        <tr>
                            <th>DÃ©signation</th>
                            <th>QtÃ©</th>
                            <th>PU HT (â‚¬)</th>
                            <th>Prix Total HT (â‚¬)</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="billing-rows"></tbody>
                </table>
                <button id="add-row-btn" class="btn btn-secondary">â• Ajouter une ligne</button>
            </div>
            <div class="totals">
                <p><strong>Total HT :</strong> <span id="total-ht">0.00</span> â‚¬</p>
                <p><strong>TVA 20% :</strong> <span id="tva">0.00</span> â‚¬</p>
                <p><strong>Total TTC :</strong> <span id="total-ttc">0.00</span> â‚¬</p>
            </div>
        </section>

        <section class="payment-terms">
            <h2>ğŸ’³ ModalitÃ©s de rÃ¨glement</h2>
            <p><strong>DÃ©lais de rÃ¨glement :</strong></p>
            <label><input type="radio" name="payment-term" value="immediate"> ImmÃ©diat Ã  lâ€™intervention</label><br>
            <label><input type="radio" name="payment-term" value="on-invoice"> Ã€ rÃ©ception de facture</label><br>
            <label><input type="radio" name="payment-term" value="30-days"> Sous 30 jours Ã  rÃ©ception de facture</label><br>
            <label><input type="radio" name="payment-term" value="custom"> Saisie libre</label>
            <input type="text" id="custom-term" disabled>

            <p><strong>Moyen de rÃ¨glement :</strong></p>
            <label><input type="radio" name="payment-method" value="cheque"> ChÃ¨que</label><br>
            <label><input type="radio" name="payment-method" value="virement"> Virement</label><br>
            <label><input type="radio" name="payment-method" value="especes"> EspÃ¨ces</label><br>
            <label><input type="radio" name="payment-method" value="custom"> Saisie libre</label>
            <input type="text" id="custom-method" disabled>

            <p><strong>Observations :</strong></p>
            <textarea id="observations"></textarea>
        </section>

        <section class="signatures">
            <h2>âœï¸ Signatures</h2>
            <div class="signature-block">
                <p><strong>Client</strong></p>
                <canvas id="client-signature-canvas" width="300" height="100"></canvas>
                <button class="sign-btn btn">Signer</button>
            </div>
            <div class="signature-block">
                <p><strong>Technicien</strong></p>
                <canvas id="technician-signature-canvas" width="300" height="100"></canvas>
                <button class="sign-btn btn">Signer</button>
            </div>
        </section>

        <section class="actions">
            <button class="btn btn-primary" id="validate-btn">âœ… Valider</button>
            <button class="btn btn-secondary" id="save-draft-btn">ğŸ’¾ Brouillon</button>
            <button class="btn btn-secondary" id="generate-pdf-btn">ğŸ“„ PDF</button>
            <button class="btn btn-secondary" id="send-email-btn">ğŸ“§ Email</button>
            <button class="btn btn-secondary" id="back-btn">â¬…ï¸ Retour</button>
        </section>
    </main>

    <nav class="bottom-nav">
        <a href="index.html">ğŸ </a>
        <a href="client.html">ğŸ“</a>
        <a href="intervention.html">ğŸ› ï¸</a>
        <a href="settings.html">âš™ï¸</a>
    </nav>

    <dialog id="signature-modal">
        <h2>Signature</h2>
        <canvas id="signature-canvas" width="300" height="150"></canvas>
        <div class="modal-actions">
            <button id="clear-signature">Effacer</button>
            <button id="cancel-signature">Annuler</button>
            <button id="validate-signature">Valider</button>
        </div>
    </dialog>

    <button class="fab">â•</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.5/dist/signature_pad.umd.min.js"></script>
    <script src="js/scripts.js"></script>
</body>
</html>
